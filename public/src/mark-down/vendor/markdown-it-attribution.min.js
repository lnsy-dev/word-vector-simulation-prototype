/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/markdown-it-attribution@0.1.4/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var e=function(e,t){var n=/https?:\/\/[^\s/$.?#()].[^\s()]*/i,r="blockquote_open",o="blockquote_close",l=e.utils.assign;function i(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function a(e){return!e||0===e.length||0===e.trim().length}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e){var t=e.match(n);return null!==t?t.shift():null}function f(e){return e.replace(/^\s+/,"")}function s(e,t,n){for(var r=0,o=t.length;r<o;r++)e.splice(n+r,0,t[r])}function v(e,t,n){t=i(t)?t:0;var r=(n=i(n)?n:e.length-1)-t;return e.splice(t,r).length}function k(e,t){for(var n in t)if(c(t,n)&&t[n]!==e[n])return!1;return!0}function b(e,t,n){for(var r=n=i(n)?n:0,o=e.length;r<o;r++)if(k(e[r],t))return r;return-1}function h(e,t){if(function(e,t){return e.slice(0,t.length)===t}(e,t))return 0;var n=t.length,r=e.indexOf("\n"+t,n+1);return r>n?r+1:-1}function p(e,t,n,r,o){n=i(n)?n:0,r=i(r)?r:0,o=i(o)?o:e.length;for(var l=r;l<o;l++){var a=e[l],c=a.content;if("inline"===a.type&&a.level===n+2&&0!==c.length)if(-1!==h(c,t))return l}return-1}t=l({},{classNameContainer:"c-blockquote",classNameAttribution:"c-blockquote__attribution",marker:"â€”",removeMarker:!0},t),e.core.ruler.after("block","attribution",(function(e){for(var n=e.tokens,l=0,i=n.length;l<i;l++){var c=b(n,{type:r},l);if(-1!==c){var k=n[c].level,g=b(n,{type:o,level:k},c+1);if(-1!==g){var m=p(n,t.marker,k,c+1,g);if(-1!==m){for(var _=c;_<=g;_++)n[_].level++;var q=n[m],w=q.content,y=h(w,t.marker),N=y>0?w.slice(0,y).replace(/\s+$/,""):null,T=y>0?w.slice(y):w;q.content=N,a(N)&&(g-=v(n,m-1,m+2));var d=n[c],A=u(T);a(A)||d.attrSet("cite",A);var C=new e.Token("blockquote_attribution_open","figcaption",1);C.block=!0,C.level=k+1;var M=new e.Token("inline","",0);M.children=[],M.level=k+2,M.content=t.removeMarker?f(T.slice(t.marker.length)):T;var O=new e.Token("blockquote_attribution_close","figcaption",-1);O.block=!0,O.level=k+1,a(t.classNameAttribution)||C.attrSet("class",t.classNameAttribution),s(n,[C,M,O],g+1);var S=new e.Token("blockquote_container_open","figure",1);S.block=!0,S.level=k;var x=new e.Token("blockquote_container_close","figure",-1);x.block=!0,x.level=k,a(t.classNameContainer)||S.attrSet("class",t.classNameContainer),s(n,[x],g+4),s(n,[S],c),l=g+5,i+=4}}}}}))};export{e as default};
//# sourceMappingURL=/sm/179e7ba7158369d501341772e0d3321c6a37d799f78de9e6c9a55e9d941f91da.map